---
layout: post
title: ZYNQ驱动GPIO的简单教程
date: 2018-8-31
author: 阿金
tags: 嵌入式 FPGA
---

# zynq 最简单demo

本项目基于zynq，展示如何在PS端通过AXI总线协议控制PS端设备。这里PS端设备是一个最简单的GPIO接口。

## PL 硬件连接

zynq毕竟是一个软（PS）硬（PL）件协同优化的嵌入式平台，要想驱动IO口，肯定需要对硬件连接有所了解。

以深鉴科技zynq7020绿板为例。

### 管脚连接

想驱动PCB板的管脚，首先看一看该管脚和芯片的连接关系。
下图中展示了管脚GPIO1连接到77号管脚。
![gpio1_77](/post_img/2018-08-31/gpio1_77.jpg)

同时查看77号管脚的对端信号为 B35_IO_N0。
![b35n0_77](/post_img/2018-08-31/b35N0_77.jpg)

再找到B35_IO_N0信号对应的芯片编号为L20。
![b35N0_l20](/post_img/2018-08-31/b35N0_l20.jpg)

所以，要驱动pcb板上的gpio1，就是驱动芯片上的 L20 管脚。

### VIVADO工程搭建

1. 新建工程
2. create block design
334. block design中添加 prosessing system
4. 自动连线 PS
5. 添加 AXI GPIO
6. 自动连线
7. validate design 通过
8. sources -> design_1.bd -> 右键 -> Generate Output Wrapper
9. 综合
10. 管脚约束
11. 实现
12. 直接烧录/生成BOOT.bin
13. 如果要采用 BOOT.bin 方式启动，需要 如下步骤 
14. 生成 fsbl
15. 寻找 uboot
16. 生成 BOOT.bin
16. 找到 image
17. 找到 device tree

烧录到
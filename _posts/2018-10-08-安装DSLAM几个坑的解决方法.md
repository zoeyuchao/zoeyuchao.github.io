---
layout: post
title: 总结下安装DSLAM框架遇到的几个坑和解决方法
date: 2018-10-08
author: 阿金
tags: 多机智能
---

# DSLAM环境配置

DSLAM 框架是我最近在follow的工作。
源工作地址在：[源工作](https://github.com/uzh-rpg/dslam_open)
我为了follow里面的代码，用python写了里面的matlab部分：[py工作](https://git.coding.net/yujincheng/dslam_py.git)

## python配置

python是跨平台的，自然不必多说。

## CPP配置

DSLAM里面需要用到各种各样的依赖库，按照源码的readme就能跑起来。需要注意几个问题。

### opencv自带安装不好使

```Shell
error while loading shared libraries: libconsole-bridge.so.0.3: cannot open shared object file: No such file or directory
```

这种情况是用```apt-get install libopencv-dev```编译会出现的问题,14.04的ubuntu opencv 是 2.4.8 不带 non-free 模块。

按照网上的[说法](https://blog.csdn.net/qq_20373723/article/details/79179955) 试了试，也用apt-get安装 non-free模块，发现这种安装方法和 ros 的 cv_bridge 冲突。

所以需要自己编译 opencv。因为 2.4.9 之后的opencv自带non-free模块。

我安装编译的是 opencv 2.4.11。

### opencv_dir 的问题

```Shell
Error:
Cmake Warning at /OpenCV2.3/cmake/OpenCVConfig.cmake:153(message):

Found OpenCV 2.4.3 Windows Super Pack but it has not binaries compatible with your configuration.

You should manually point Cmake variable OpenCV_DIR to your build of OpenCV library.
Call Stack(most recent call first):

CMakeLists.txt:2(find_package)

CMake Error at CMakeLists.txt:2(find_package):


Found package configuration file:

/OpenCV2.3/cmake/OpenCVConfig.cmake
```

这个问题参考了[stackoverflow](https://stackoverflow.com/questions/26553659/linking-opencv-nonfree-components-sift-features-and-ocl-specifically)

其实就是重新编译和安装OpenCV，

在编译OpenCV时，将 

```Cmake
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..
```

改为

```Cmake
cmake -D CMAKE_BUILD_TYPE=RELEASE -D WITH_OPENCL=OFF -D CMAKE_INSTALL_PREFIX=/usr/local ..
```

然后再 

```Shell
sudo make install
```

取消Opencl之后编译安装opencv，再编译dslam需要的cpp文件就好了。